(function(){function d(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}
var g=[].concat(function(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:d(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}(document.querySelectorAll("[parallax]"))),h={},k=new IntersectionObserver(function(a){a.forEach(function(b){var c=b.target;b=b.isIntersecting;console.log(c,b);if(b){if(b=c.getAttribute("data-src"))c.style["background-image"]=b,c.removeAttribute("data-src");h[c.a]?console.log("already in the map"):
(b=function(){var e=c.getBoundingClientRect().top-window.innerHeight;c.style["background-position-y"]=Math.floor(e/2)+"px";var f=c.getAttribute("x");f&&(c.style["background-position-x"]=Math.floor(e*parseFloat(f))+"px")},window.addEventListener("scroll",b),h[c.a]=b)}else c.a in h&&(window.removeEventListener("scroll",h[c.a]),delete h[c.a])})}),l=0;g.forEach(function(a){a.a=l++;a.setAttribute("data-src",a.style["background-image"]);a.style["background-image"]=null;k.observe(a)});}).call(this);

//# sourceMappingURL=parallax.js.map